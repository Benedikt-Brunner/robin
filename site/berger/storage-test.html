<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/svg" href="../crosshatch.svg">
	<title>berger</title>
	<link href="../global.css" rel="stylesheet">
<style>
.flex { display: flex; }
.row { display: flex; flex-flow: row nowrap; }
.col { display: flex; flex-flow: column nowrap; }
.flex.end { justify-content: flex-end; }
.padded { padding: .3em; }
.offset { margin: .3em; }
.box { border: thin solid grey; }
.box.blue { border-color: blue !important; }
.box.red { border-color: red !important; }
</style>
</head>
<body>
<div>
	<div id="form" class="col offset padded"></div>
	<div class="offset padded flex end">
		<input id="start" type="button" value="start"></input>
	</div>
</div>
<div id="crosstable"></div>
<script src="../vendor/jquery-3.6.3.min.js"></script>
<script type="module">
import { Matches } from "../Matches.js";
import { CrossTable } from "../CrossTable.js";
import * as pif from "../PlayersInputForm.js";
const form = new pif.Form("form");
form.load(localStorage.players);
form.add();
form.oncommit = () => {
	form.shuffle();
	localStorage.players = form.json;
	if (form.empty) return;
	const data = { players: form.items, matches: [] };
	const mm = new Matches(data);
	
	// TODO: We need to store the current crosstable
	//	model and allow to add/remove/rename players.
	//	It's late and my thinking's muddled. Sleep.
	console.log(mm);
	mm.addPlayer("hi");
	mm.removePlayer(13);
	
	console.log(mm);
	form.hide(true);
	const table = new CrossTable("#crosstable");
	table.installEvents();
	table.setData(data);
	table.update();
};
form.onremove = row => {
	console.log("removed", row.index, row.text, row);
};
// const submit = document.querySelector("#form ~ div > input");
// const submit = document.querySelector('input[type="button"][value="start"]');
document.querySelector("#start").onclick = e => { form.commit() };
</script>
</body>
</html>